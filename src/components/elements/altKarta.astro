---
import {siteData} from '@data/siteData';

const { coordinates} = siteData;
const {address} = siteData;
const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address.full)}`;

// OpenStreetMap embed URL - using the coordinates from the data
const osmEmbedUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${coordinates.lng - 0.005}%2C${coordinates.lat - 0.003}%2C${coordinates.lng + 0.005}%2C${coordinates.lat + 0.003}&layer=mapnik&marker=${coordinates.lat}%2C${coordinates.lng}`;
---

<section class="location section section--alt" aria-labelledby="location-title" id="location">
    <div class="">
        
        <div class=" bg-slate-200 h-auto rounded md:rounded-lg">
            <iframe 
            class="location__map"
            title="Skysport i Åre"
            src={osmEmbedUrl}
            loading="lazy"
            referrerpolicy="no-referrer"
            ></iframe>
            <a 
            href={`https://www.openstreetmap.org/?mlat=${coordinates.lat}&mlon=${coordinates.lng}#map=17/${coordinates.lat}/${coordinates.lng}`}
            class="location__map-link"
            target="_blank"
            rel="noopener noreferrer"
            >
            Öppna stor karta.
            </a>
        </div>
     
    </div>
</section>

<style>
  .location__content {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: var(--space-8);
    align-items: start;
  }
  
  .location__map {
    display: block;
    width: 100%;
    height: 300px;
    border: none;
    filter: 
      grayscale(20%) 
      sepia(10%) 
      contrast(95%);
    transition: filter var(--transition-normal);
  }
  
  .location__map:hover {
    filter: 
      grayscale(0%) 
      sepia(0%) 
      contrast(100%);
  }
  
  .location__map-link {
    display: block;
    padding: var(--space-2);
    text-align: center;
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    background-color: var(--color-bg-deep);
    text-decoration: none;
    transition: color var(--transition-fast);
  }
  
  .location__map-link:hover {
    color: var(--color-primary);
  }
  
  @media (max-width: 768px) {
    .location__content {
      grid-template-columns: 1fr;
    }
    
    .location__map-wrapper {
      order: -1;
    }
    
    .location__map {
      height: 280px;
    }
    
  }
</style>

