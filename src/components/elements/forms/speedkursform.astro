---
import { speedKurser } from '@data/formData';
import { boende2026 } from '@data/formData';
import Hr1 from "@components/elements/SeparatorLine.astro";
import SpeedKursOverlay from "@elements/modals/speedkursbooking.astro";
import "@assets/css/flatpickr.css";
import "@assets/css/flatpickrDark.css";
/*
interface BookingPageContent {
  bookingPage?: string;
  schemaDate?: string;
}

interface Props {
  content: BookingPageContent;
}
const { content } = Astro.props;
*/




---

<div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
    <form id="speedKurs" method="POST">
    <div class="grid grid-cols-1 lg:grid-cols-4">

        <div class="lg:text-2xl font-bold pt-6 sm:pt-1 py-3"><!--col 1 -->
            <h3>Välj Speedkurs<span class="text-amber-600 text-xl">*</span></h3>
            <div id="missed-kurs" class="hidden text-amber-600 text-xl">Obs! Välj en av speedkurs alternativ.</div>
        </div>
        <div class="lg:col-span-3 py-3"><!-- col 2,3,4 -->
            <div class="flex flex-col gap-y-3">
                { speedKurser.map((kurs, index) => (
                        <div class="flex">
                            
                            <input type="radio" id={`hs-radio-speed-${index + 1}`}  name="hs-radio-speed-kurs"  class="shrink-0 mt-0.5 w-5 h-5 lg:w-6 lg:h-6 border-gray-200 rounded-full text-blue-600 focus:ring-blue-500 checked:border-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800"  >
                            <label for={`hs-radio-speed-${index + 1}`} class="text-md lg:text-lg text-gray-500 ms-2 dark:text-neutral-400">{kurs.kursLabel} </label>
                            <input type="hidden"  id={`hs-speedkurs-${index + 1}`} value={kurs.kursValue} name={kurs.kursID} >
                        </div>
                    ))
                }
            </div>
        </div>
        
         <div id="kursChecked" class="hidden lg:text-2xl font-bold hidden py-1 sm:py-4"><!--col 1 -->
            <h3>Speed Kurs </h3>
        </div>
        <div id="kursPris" class="py-1 sm:py-4 hidden lg:col-span-3  ">
            <input type="hidden" id="checkedKursName" name="checkedKursName" >
            <input type="text" id="hs-kursPris" name="hs-kursPris" disabled  class="py-2.5 sm:py-3 px-4 block w-s border  border-gray-600 rounded-lg text-slate-800 sm:text-sm lg:text-lg focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200 dark:placeholder-neutral-500 dark:focus:border-neutral-700 dark:focus:ring-neutral-600" > 
            <label for="hs-kursPris" id="kursPrisLabel" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">kurs comment</label>
        </div>


         

        <div class="lg:col-span-4">
           <Hr1 />
        </div>

<div class="lg:text-2xl font-bold"><!--col 1 -->
            <h3>Välj önskat kursdatum<span class="text-amber-600 text-xl">*</span></h3>
            <div id="missed-kurs" class="hidden text-amber-600 text-xl">Obs! Välj en kurs datum.</div>
        </div>

        <div class="lg:col-span-3"><!-- col 2,3,4 -->
            <div class="flex flex-col gap-y-3">
                <div > 
                                                 
                        <input id="flatpickr-date" placeholder="Välj Datum" name="hs-datum" type="text" class="hs-datepicker w-s p-2  sm:py-3 sm:px-4 block  border border-gray-400 rounded-lg sm:text-sm lg:text-lg dark:text-slate-200 focus:border-blue-600 focus:ring-blue-600 disabled:opacity-50 disabled:pointer-events-none" >
                 
                    <label for="flatpickr-date" class="block mb-2 text-sm text-left text-gray-200 sm:text-xl font-medium dark:text-white"><!-- Önskat Datum<span class="text-orange-600 sm:text-4xl">*</span> --></label>
                    <p class="text-left pt-0 text-xs">Obs! Du kan boka boende hos Skysport om du är på 2 dagars kurs. Skriv förfrågan i meddelande fälten och vi återkommer.  </p> 
                </div>
            </div>
        </div>

        <div class="lg:col-span-4">
           <Hr1 />
        </div>
     

       

        <div class="hidden lg:text-2xl font-bold pt-6 py-0 sm:py-3"><!--col 1 -->
            <h3>Summa:</h3>
        </div>
        <div class=" col-span-1 lg:col-span-3 py-0  sm:py-3">
            <div class="py-2 sm:py-0 "><!-- 2 col again -->                                
                <input type="hidden" name="hs-summa" id="hs-summa" placeholder="" value="" disabled class="lg:w-1/5 sm:w-full p-2 sm:py-3 sm:px-4 block w-full border  border-gray-200 rounded-lg sm:text-sm lg:text-lg focus:border-blue-500 focus:ring-blue-500  disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                 <label for="hs-summa" class="text-sm lg:text-lg text-gray-500 ms-2 dark:text-neutral-400"></label>
          </div>      
        </div>
    </div><!--end grid-->
    

    <div class="lg:text-3xl pt-6 sm:pt-0">
            <h2>Kontakt Information</h2>
            <Hr1 />
    </div>
      <!-- Grid -->
        <div class="grid grid-cols-2 sm:grid-cols-5 gap-2 sm:gap-4 lg:gap-6">
            <div class="lg:text-2xl font-bold col-span-2 sm:col-span-1"><!--col 1 -->
                <h3>Namn<span class="text-amber-600 text-xl">*</span></h3>
            </div>
            <div class="py-0  col-span-2 ">
                <input type="text" name="hs-firstname-contacts-1" id="hs-firstname-contacts-1" placeholder="Förnamn"  class="p-2 sm:py-3 sm:px-2 w-full block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-firstname-contacts-1" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Förnamn<span class="text-amber-600 text-lg">*</span> </label>
            </div>
            <div class="py-0 col-span-2 ">
                <input type="text" name="hs-lastname-contacts-1" id="hs-lastname-contacts-1" placeholder="Efternamn" class="p-2 sm:py-3 sm:px-2 w-full block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-lastname-contacts-1" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Efternamn<span class="text-amber-600 text-lg">*</span> </label>
            </div>

            <div class="lg:text-2xl font-bold col-span-1 sm:col-span-1"><!--col 1 -->
                <h3>Födelseår<span class="text-amber-600 text-xl">*</span></h3>
            </div>
            <div class="py-2 sm:py-0  sm:col-span-1 ">
                <input type="text" name="hs-birthyear" id="hs-birthyear" placeholder="xxxx"  class="p-2 w-full sm:py-3 sm:px-2 sm:w-1/2 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-birthyear" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Skriv ditt födelseår XXXX</label>
            </div>
            <div class="lg:text-2xl font-bold sm:col-span-1"><!--col 1 -->
                <h3>Din Vikt</h3>
            </div>
            <div class="py-2 sm:py-0  sm:col-span-2 ">
                <input type="text" name="hs-weight" id="hs-weight" placeholder="Vikt"  class="p-2 w-full sm:py-3 sm:px-2 sm:w-1/2 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-weight" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Vikt</label>
            </div>

            <!-- adress -->
            <div class="lg:text-2xl font-bold col-span-2 sm:col-span-1"><!--col 1 -->
                <h3>Adress<span class="text-amber-600 text-xl">*</span></h3>
            </div>
            <div class="py-0 col-span-2 sm:col-span-4 ">
                <input type="text" name="hs-gatu" id="hs-gatu" placeholder="Gatuadress"  class="p-2 sm:py-3 sm:px-2 w-full sm:w-3/4 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-gatu" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Gatuadress<span class="text-amber-600 text-lg">*</span></label>
            </div>

            <div class="lg:text-2xl font-bold hidden sm:block"><!--col 1 -->
                <h3>&nbsp;</h3>
            </div>
            <div class="py-2 sm:py-0 col-span-1 sm:col-span-2 ">
                <input type="text" name="hs-city" id="hs-city" placeholder="Stad"  class="p-2 sm:py-3 sm:px-2 w-full lg:w-1/2 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-city" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Stad<span class="text-amber-600 text-lg">*</span></label>
            </div>
            <div class="py-2 sm:py-0 col-span-1 smcol-span-2 ">
                <input type="text" name="hs-post-nr" id="hs-post-nr" placeholder="Postnummer"  class="p-2 sm:py-3 sm:px-2 w-full  block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-post-nr" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Postnummer<span class="text-amber-600 text-lg">*</span></label>
            </div>

            <div class="lg:text-2xl font-bold hidden sm:block"><!--col 1 -->
                <h3>&nbsp;</h3>
            </div>
            <div class="py-2 sm:py-0 col-span-2 sm:col-span-4 sm:col-start-2">
                <input type="text" name="hs-land" id="hs-land" placeholder="Land"  class="p-2 w-full sm:py-3 sm:px-2 sm:w-3/4 lg:w-1/2 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-land" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Land<span class="text-amber-600 text-lg">*</span></label>
            </div>

            <div class="lg:text-2xl font-bold col-span-1 sm:col-span-1"><!--col 1 -->
                <h3>E-post<span class="text-amber-600 text-xl">*</span></h3>
            </div>
            <div class="py-2 sm:py-0 colspan-1 sm:col-span-4 ">
                <input type="email" name="hs-email-contacts-1" id="hs-email-contacts-1" autocomplete="email"  class="p-2 w-full sm:py-3 sm:px-2 sm:w-1/2 lg:w-1/3 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-email-contacts-1" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">E-post<span class="text-amber-600 text-lg">*</span></label>   
            </div>
            
            <div class="lg:text-2xl font-bold col-span-1 "><!--col 1 -->
                <h3>Telefon dagtid</h3>
            </div>
            <div class="py-2 sm:py-0 col-span-1 sm:col-span-4 ">
                <input type="text" name="hs-tel-day" id="hs-tel-day" placeholder="tel. dag"  class="p-2 w-full sm:py-3 sm:px-2 sm:w-1/3 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-tel-day" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Tel. dag</label>
            </div>

            <div class="lg:text-2xl font-bold "><!--col 1 -->
                <h3>Telefon mobil<span class="text-amber-600 text-xl">*</span></h3>
            </div>
            <div class="py-2 sm:py-0 col-span-1 sm:col-span-4 ">
                <input type="text" name="hs-mobile" id="hs-mobile" placeholder="tel. mobil"  class="p-2 w-full sm:py-3 sm:px-2 sm:w-1/3 block  border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
                <label for="hs-mobile" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Tel. Mobil<span class="text-amber-600 text-lg">*</span></label>
            </div>

            <div class="lg:text-2xl font-bold col-span-2 sm:col-span-1"><!--col 1 -->
                <h3>Meddelande</h3>
            </div>
            <div class="py-2 sm:py-0 col-span-2 sm:col-span-4 ">
                <textarea id="hs-meddelande" name="hs-meddelande" class="py-2.5 sm:py-3 px-4 block w-full border  border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-200 dark:placeholder-neutral-500 dark:focus:border-neutral-700 dark:focus:ring-neutral-600" rows="3" placeholder="Om det är något mer du vill informera oss om eller fråga, kan du skriva det här! Om bokningen gäller för mer än en person kan ni meddela oss via detta meddelande." ></textarea>   
                <label for="hs-meddelande" class="block mb-2 text-sm text-gray-700 font-medium dark:text-white">Meddelande</label>
            </div>

           {/*  <div class="lg:text-2xl font-bold col-span-2 sm:col-span-1 pt-2"><!--col 1 -->
                <h3>Vilkor<span class="text-amber-600 text-xl">*</span></h3>
            </div>
            <div class="py-0 sm:py-0 col-span-2 sm:col-span-4 flex flex-row items-center">                  
                <input id="hs-kursvilkor" name="hs-kursvilkor" type="checkbox" value="true" class="shrink-0 mt-1.5   cursor-pointer rounded-full w-5 h-5 sm:w-4 sm:h-4 p-5 border border-gray-200 rounded-sm text-blue-600 focus:ring-blue-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800">
                <label for="hs-kursvilkor" class="pt-2 text-sm text-gray-600 px-2 sm:text-xl dark:text-neutral-400">Ja, jag här läst igenom kursinformationen och godkänner dessa. <a class="text-blue-600 decoration-2 hover:underline focus:outline-hidden focus:underline font-medium dark:text-blue-500" href="../../Kurs/kursvilkor">KLICKA HÄR</a> för villkor och kursinformation.</label>
            </div> */}

             <div class="lg:text-2xl font-bold col-span-2 sm:col-span-1 pt-2"><!--col 1 -->
                <h3>Nyhetsbrev</h3>
            </div>
            <div class="py-0 sm:py-0 col-span-2 sm:col-span-4 flex flex-row items-center">                  
                <input id="hs-news" name="hs-news" type="checkbox" value="true" class="shrink-0 mt-1.5   cursor-pointer rounded-full w-5 h-5 sm:w-4 sm:h-4 p-5 border border-gray-200 rounded-sm text-blue-600 focus:ring-blue-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800">
                <label for="hs-news" class="pt-2 text-sm text-gray-600 px-2 sm:text-xl dark:text-neutral-400">Ja tack!  Jag vill prenumerera på Skysport's Nyhetsbrev.</label>
            </div>

            <div class="lg:text-2xl font-bold col-span-2 sm:col-span-1 pt-2 "><!--col 1 -->
                <h3>Integritietspolicy<span class="text-amber-600 text-xl">*</span></h3>
            </div>
            <div class="py-0 col-span-2 sm:col-span-4  flex flex-row items-center">                  
                <input id="hs-integ" name="hs-integ" type="checkbox" value="true" class="shrink-0 mt-1.5   cursor-pointer rounded-full w-5 h-5 sm:w-4 sm:h-4 p-5  border border-gray-200 rounded-sm text-blue-600 focus:ring-blue-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800">
                <label for="hs-integ" class="pt-2 sm:pt-0text-sm text-gray-600 px-2 sm:text-xl dark:text-neutral-400"> Jag godkänner.<span class="text-amber-600 text-lg">*</span>  Läs om Skysports integritetspolicy här: <a class="text-blue-600 decoration-2 hover:underline focus:outline-hidden focus:underline font-medium dark:text-blue-500" href="https://skysport.se/integritetspolicy/">integritetspolicy(GDPR)</a></label>
            </div>

        </div>
      
        <div class="mt-3 flex">
            <div class="mt-6 grid">
                <button type="button" id="speedkurs-booking" class="w-s py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-amber-700 focus:outline-hidden focus:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none">
                    Skicka Speedkurs Bokning
                </button>
            </div>
        </div>     
    </form>
</div>
<SpeedKursOverlay />
<script>
  
    import flatpickr from "flatpickr"
    import  {Swedish}  from "flatpickr/dist/l10n/sv.js"

   function datepickerCG () {
        flatpickr('#flatpickr-date', {
        monthSelectorType: 'static',
        'locale': Swedish,
        weekNumbers: true,
        dateFormat: "Y-m-d",
        minDate: 'today',
      /*  enable: ['2026-02-02', '2026-02-09', '2026-02-16', '2026-02-23', '2026-03-02','2026-03-16','2026-03-23', '2026-03-30', '2026-04-06', '2026-04-13', '2026-04-20', '2026-04-27',
     '2026-05-25', '2026-06-01', '2026-06-08', '2026-06-22', '2026-06-29', '2026-07-06', '2026-07-13', '2026-07-20', '2026-07-27', '2026-08-03', '2026-08-10', '2026-08-24',
      '2026-08-31', '2026-09-14', '2026-09-28', ],*/
        disable:[
             function(date) {
            // return true to disable
            return (date.getDay() === 0 || date.getDay() === 6);
            },
            {
                from: '2026-04-28',
                to: '2026-05-24',
            },
            {
                from: '2026-10-28',
                to: '2026-12-07',
            },
        ],       
    })};

    datepickerCG();

</script>

<script is:inline>



    function radioValue(radiogroupname) {
        var rbv = document.getElementsByName(radiogroupname);
        for (i = 0; i < rbv.length; i++) {
            if (rbv[i].type = "radio") {
                if (rbv[i].checked) 
                    return(rbv[i].value); 
            }   
        }
    }

    const get = (id) => document.getElementById(id) || { value: '' } ;

    //work the speed kurs type
    const kursbuttons =  document.getElementsByName('hs-radio-speed-kurs')
        kursbuttons.forEach((button) => {
            button.addEventListener('click', () => { 
            KursFunk()           
        });
    });

    function KursFunk(){
        const eleK = document.getElementsByName('hs-radio-speed-kurs');
            
        for (i = 0; i < eleK.length; i++) {
                    if (eleK[i].type = "radio") {
                        if (eleK[i].checked ) {
                            const kursTyper = eleK[i].id; 
                            const kursPris = get('hs-speedkurs-'+ (i + 1)).value;
                            const formattedPris = new Intl.NumberFormat('sv-SE', {
                                    style: 'currency',
                                    currency: 'SEK'
                                    }).format(kursPris);  
                            document.getElementById("hs-kursPris").value = formattedPris;
                            document.getElementById("hs-summa").value = formattedPris;
                            if(kursTyper === 'hs-radio-speed-1'){
                                document.getElementById("kursChecked").children[0].innerHTML = 'Speed kurs 1 dag';
                                document.getElementById("checkedKursName").value = 'Speed kurs 1 dag';
                                document.getElementById("kursPrisLabel").innerHTML = 'I priserna ingår instruktör och utrustning.';
                            } else if (kursTyper === 'hs-radio-speed-2'){
                                document.getElementById("kursChecked").children[0].innerHTML = 'Speed kurs 2 dagar';
                                document.getElementById("checkedKursName").value = 'Speed kurs 2 dagar';
                                document.getElementById("kursPrisLabel").innerHTML = 'I priserna ingår instruktör och utrustning.';
                            } 
                            document.getElementById("kursChecked").classList.remove("hidden");
                            document.getElementById("kursPris").classList.remove("hidden");
                               
                         }
                           // document.getElementById("kursChecked").classList.add("hidden");
                           // document.getElementById("kursPris").classList.add("hidden");
                                                                               
                       
                    }
                }
    }



const submitForm = () => {
 
 validateSpeedKurs()

}

const submitBTN = document.getElementById('speedkurs-booking')
submitBTN?.addEventListener('click', submitForm)

const validateSpeedKurs = () => {

    const  radioSpeedKurs = radioValue('hs-radio-speed-kurs');
    if (radioSpeedKurs !== 'on') {
        document.getElementById('missed-kurs').classList.remove('hidden')
        get('hs-radio-speed-1').focus();
        HSOverlay.open('#hs-kurs-alert');
        return false;
    } else {
        get('missed-kurs').classList.add('hidden')
        }
    
     if (get('flatpickr-date').value.length < 4) {
      get('flatpickr-date').classList.remove('border-gray-200')
      get('flatpickr-date').classList.add('border-red-500')
      get('flatpickr-date').focus();
       HSOverlay.open('#hs-date-alert');
        return false;
    } 
    
    if (get('hs-firstname-contacts-1').value.length < 2) {
      get('hs-firstname-contacts-1').classList.remove('border-gray-200')
      get('hs-firstname-contacts-1').classList.add('border-red-500')
      get('hs-firstname-contacts-1').focus();
       HSOverlay.open('#hs-contact-alert');
    } else if (get('hs-lastname-contacts-1').value.length < 2) {
      get('hs-lastname-contacts-1').classList.remove('border-gray-200')
      get('hs-lastname-contacts-1').classList.add('border-red-500')
      get('hs-lastname-contacts-1').focus();
      HSOverlay.open('#hs-contact-alert');
    } else if (get('hs-birthyear').value.length < 4) {    
      get('hs-birthyear').classList.remove('border-gray-200')
      get('hs-birthyear').classList.add('border-red-500')
      get('hs-birthyear').focus();
      HSOverlay.open('#hs-contact-alert');
    } else if (get('hs-gatu').value.length < 5) {      
      get('hs-gatu').classList.remove('border-gray-200')
      get('hs-gatu').classList.add('border-red-500')
      get('hs-gatu').focus();
      HSOverlay.open('#hs-contact-alert');
    } else if (get('hs-city').value.length < 2) {      
      get('hs-city').classList.remove('border-gray-200')
      get('hs-city').classList.add('border-red-500')
      get('hs-city').focus();
      HSOverlay.open('#hs-contact-alert');
    } else if (get('hs-post-nr').value.length < 5) {      
      get('hs-post-nr').classList.remove('border-gray-200')
      get('hs-post-nr').classList.add('border-red-500')
      get('hs-post-nr').focus();
      HSOverlay.open('#hs-contact-alert');
    } else if (get('hs-land').value.length < 4) {      
      get('hs-land').classList.remove('border-gray-200')
      get('hs-land').classList.add('border-red-500')
      get('hs-land').focus();
      HSOverlay.open('#hs-contact-alert');
    } else if (get('hs-email-contacts-1').value.length < 5 || !get('hs-email-contacts-1').value.includes('@')) {
      get('hs-email-contacts-1').classList.remove('border-gray-200')
      get('hs-email-contacts-1').classList.add('border-red-500')
      get('hs-email-contacts-1').focus();
      HSOverlay.open('#hs-email-alert');
    } else if (get('hs-mobile').value.length < 5) {      
      get('hs-mobile').classList.remove('border-gray-200')
      get('hs-mobile').classList.add('border-red-500')
      get('hs-mobile').focus();
      HSOverlay.open('#hs-mobil-alert');
    } 
    /*
    else if (!get('hs-kursvilkor').checked) {      
      get('hs-kursvilkor').classList.remove('border-gray-200')
      get('hs-kursvilkor').classList.add('border-red-500')
      get('hs-kursvilkor').focus();
      HSOverlay.open('#hs-kurs-vilkor-alert');
    } 
    */
    else if (!get('hs-integ').checked) {      
      get('hs-integ').classList.remove('border-gray-200')
      get('hs-integ').classList.add('border-red-500')
      get('hs-integ').focus();
      HSOverlay.open('#hs-vilkor-alert');
    } else {
       //alert('validation klar')
     sendmail()
    }

  }

const getFormData = () => {
  const store = Object.create(null)
    store.kursDate = get("flatpickr-date")?.value
    store.kursPriceISO = get("hs-kursPris")?.value
    store.kursName = get("checkedKursName")?.value

    /*
    store.kursVeckan = get("kurs-veckan")?.value
    store.boendeType = get('boendeDescription')?.value
    store.boendeRawPrice = get("rawBoPrice")?.value 
    store.boendePriceISO = get('BoPriceISO')?.value
    store.apartmentRequest = get('hs-apartR')?.value
    store.summa = get("hs-summa")?.value
    */

    // Contact Info
    store.firstName = get('hs-firstname-contacts-1')?.value
    store.lastName = get('hs-lastname-contacts-1')?.value
    store.birthYear = get('hs-birthyear')?.value
    store.adress = get('hs-gatu')?.value
    store.city = get('hs-city')?.value
    store.postNr = get('hs-post-nr')?.value
    store.country = get('hs-land')?.value
    store.email = get('hs-email-contacts-1')?.value
    store.telday = get('hs-tel-day')?.value 
    if (store.telday.length < 3 ){
        store.telday = 'N/A';
    } 
        
    store.tel = get('hs-mobile')?.value
    store.weight = get('hs-weight')?.value
    if( store.weight.length < 2 ){
        store.weight = 'N/A';
    } 
        
    store.message = get('hs-meddelande')?.value
    
     if( get('hs-kursvilkor')?.checked){
        store.kursvilkor =  'Ja'
    }  else {
        store.kursvilkor =  'Nej'
    }
     if( get('hs-news')?.checked){
        store.newsletter =  'Ja'
    }  else {
        store.newsletter =  'Nej'
    }
    if( get('hs-integ')?.checked){
        store.checkboxOK =  'Ja'
    }  else {
        store.checkboxOK =  'Nej'
    }
store.subject = 'Speedkurs Bokning'
  return store
}



const sendmail = async () => {
  
  const { kursName, kursDate,  kursPriceISO,   firstName, lastName, tel, telday, email, message, weight, birthYear, adress, postNr, city, country, kursvilkor, newsletter, checkboxOK, subject } = getFormData()
  const data = await fetch('/api/sendSpeedKursBooking.json', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({kursName, kursDate,  kursPriceISO, firstName, lastName, tel, telday, email, message, weight,  birthYear, adress, postNr, city, country, kursvilkor, newsletter, checkboxOK, subject }),
  })
    .then((res) => {
      if (!res.ok) {
        throw new Error(res.status)
      }
      return res.json()
    })
    .catch((err) => {
      console.log('Error', err)
      throw new Error('Network error.')
    })

  console.log(data) // Here is the response from backend
   alert('Message successfully sent');
  document.getElementById("booking-form").reset();
}

</script>




